#ifndef HOOKBASE
#define HOOKBASE
#define WIN32_LEAN_AND_MEAN

#pragma warning(disable:4996)
#pragma warning(disable:4800)

#include <Windows.h>
#include "detours.h"
#include <fstream>
#include <d3d9.h>
#include <d3dx9.h>
#include "Model_Recognition.h"

#pragma comment(lib, "d3d9.lib")
#pragma comment(lib, "d3dx9.lib")

using namespace std;

#define mDetourDef(target, detourFunc)(DetourFunction((PBYTE)target, (PBYTE)&detourFunc))

typedef HRESULT (WINAPI *origBeginscene)(LPDIRECT3DDEVICE9 pDevice);
typedef HRESULT (WINAPI *origEndscene)(LPDIRECT3DDEVICE9 pDevice);
typedef HRESULT (WINAPI *origPresent)(LPDIRECT3DDEVICE9 pDevice, const RECT *pSourceRect, const RECT *pDestRect, HWND hDestWindowOverride, const RGNDATA *pDirtyRegion);
typedef HRESULT (WINAPI *origSetStreamSource)(LPDIRECT3DDEVICE9 pDevice, UINT StreamNumber, IDirect3DVertexBuffer9 *pStreamData, UINT OffsetInBytes, UINT Stride);
typedef HRESULT (WINAPI *origDrawIndexedPrimitive)(LPDIRECT3DDEVICE9 pDevice, D3DPRIMITIVETYPE Type, INT DrawBaseIndex, UINT MinIndex, UINT NumVertices, UINT StartIndex, UINT PrimitiveCount);
typedef HRESULT (WINAPI *origReset)(LPDIRECT3DDEVICE9 pDevice, D3DPRESENT_PARAMETERS *pPresentationParams);

//Defines for chams
#define Opfor		((NumVertices == 3124 && PrimitiveCount == 4132) || (NumVertices == 1970 && PrimitiveCount == 2186) || (NumVertices == 1252 && PrimitiveCount == 1160) || (NumVertices == 470 && PrimitiveCount == 352) || (NumVertices == 3531 && PrimitiveCount == 4526) || (NumVertices == 2188 && PrimitiveCount == 2386) || (NumVertices == 1325 && PrimitiveCount == 1194) || (NumVertices == 499 && PrimitiveCount == 352) || (NumVertices == 2715 && PrimitiveCount == 3588) || (NumVertices == 1620 && PrimitiveCount == 1886) || (NumVertices == 943 && PrimitiveCount == 908) || (NumVertices == 441 && PrimitiveCount == 308) || (NumVertices == 2816 && PrimitiveCount == 3642) || (NumVertices == 1773 && PrimitiveCount == 2022) || (NumVertices == 1150 && PrimitiveCount == 1086) || (NumVertices == 435 && PrimitiveCount == 320) || (NumVertices == 250 && PrimitiveCount == 304) || (NumVertices == 2818 && PrimitiveCount == 3672) || (NumVertices == 150 && PrimitiveCount == 142) || (NumVertices == 1715 && PrimitiveCount == 1950) || (NumVertices == 1101 && PrimitiveCount == 1066) || (NumVertices == 481 && PrimitiveCount == 350) )
#define Marines		((NumVertices == 681  && PrimitiveCount == 588 ) || (NumVertices == 2613 && PrimitiveCount == 3248) || (NumVertices == 1842 && PrimitiveCount == 1978) || (NumVertices == 1144 && PrimitiveCount == 814) || (NumVertices == 1034 && PrimitiveCount == 904) || (NumVertices == 447 && PrimitiveCount == 312) || (NumVertices == 3790 && PrimitiveCount == 4078) || (NumVertices == 2784 && PrimitiveCount == 2384) || (NumVertices == 1572 && PrimitiveCount == 1166) || (NumVertices == 634 && PrimitiveCount == 372) || (NumVertices == 233 && PrimitiveCount == 330) || (NumVertices == 3597 && PrimitiveCount == 4280) || (NumVertices == 2301 && PrimitiveCount == 2364) || (NumVertices == 1341 && PrimitiveCount == 1132) || (NumVertices == 580 && PrimitiveCount == 380) || (NumVertices == 689 && PrimitiveCount == 1172) || (NumVertices == 367 && PrimitiveCount == 298)  || (NumVertices == 4050 && PrimitiveCount == 4486) || (NumVertices == 308 && PrimitiveCount == 212) || (NumVertices == 2540 && PrimitiveCount == 2444) || (NumVertices == 628 && PrimitiveCount == 670) || (NumVertices == 1488 && PrimitiveCount == 1114) || (NumVertices == 105 && PrimitiveCount == 74) || (NumVertices == 592 && PrimitiveCount == 374) || (NumVertices == 2516 && PrimitiveCount == 2940) || (NumVertices == 106 && PrimitiveCount == 114) || (NumVertices == 1726 && PrimitiveCount == 1760) || (NumVertices == 1020 && PrimitiveCount == 872) || (NumVertices == 587 && PrimitiveCount == 370) || (NumVertices==204 && PrimitiveCount==172) || (NumVertices== 681  && PrimitiveCount==588) || (NumVertices== 63   && PrimitiveCount== 62)  ||(NumVertices== 822  && PrimitiveCount== 1084)||(NumVertices== 2516 && PrimitiveCount== 2940)||(NumVertices== 394  && PrimitiveCount== 274) ||(NumVertices== 275  && PrimitiveCount== 322) ||(NumVertices== 1409 && PrimitiveCount== 868) ||(NumVertices== 716  && PrimitiveCount== 962) ||(NumVertices== 394  && PrimitiveCount== 274) ||(NumVertices== 178  && PrimitiveCount== 166) ||(NumVertices== 1344 && PrimitiveCount== 944) ||(NumVertices== 599  && PrimitiveCount== 418) ||(NumVertices== 49   && PrimitiveCount== 50)  ||(NumVertices== 855  && PrimitiveCount== 1100)||(NumVertices== 56   && PrimitiveCount== 44)  ||(NumVertices== 183  && PrimitiveCount== 112) ||(NumVertices== 3790 && PrimitiveCount== 4078)||(NumVertices== 56   && PrimitiveCount== 44)  ||(NumVertices== 34   && PrimitiveCount== 30)  ||(NumVertices== 874  && PrimitiveCount== 1228) || (NumVertices== 213 && PrimitiveCount== 282) ||(NumVertices== 367  && PrimitiveCount== 298) ||(NumVertices== 306  && PrimitiveCount== 274) ||(NumVertices== 1495 && PrimitiveCount== 982) ||(NumVertices== 1198 && PrimitiveCount== 842) ||(NumVertices== 306  && PrimitiveCount== 274) ||(NumVertices== 4050 && PrimitiveCount== 4486)|| (NumVertices== 686  && PrimitiveCount== 952 )||(NumVertices== 828  && PrimitiveCount== 1300)||(NumVertices== 3597 && PrimitiveCount== 4280)||(NumVertices== 356 &&  PrimitiveCount== 262 )||(NumVertices== 110  && PrimitiveCount== 122 )||(NumVertices== 2613 && PrimitiveCount== 3248)||(NumVertices== 1001 && PrimitiveCount== 964) )
#define Spetz		((NumVertices == 4358 && PrimitiveCount == 4864) || (NumVertices == 3278 && PrimitiveCount == 3188) || (NumVertices == 503 && PrimitiveCount == 704) || (NumVertices == 1633 && PrimitiveCount == 1332) || (NumVertices == 840 && PrimitiveCount == 618) || (NumVertices == 783 && PrimitiveCount == 1168) || (NumVertices == 4242 && PrimitiveCount == 5028) || (NumVertices == 2391 && PrimitiveCount == 2488) || (NumVertices == 1689 && PrimitiveCount == 1422) || (NumVertices == 384 && PrimitiveCount == 250) || (NumVertices == 969 && PrimitiveCount == 708) || (NumVertices == 4270 && PrimitiveCount == 4804) || (NumVertices == 2755 && PrimitiveCount == 2494) || (NumVertices == 1317 && PrimitiveCount == 1054) || (NumVertices == 809 && PrimitiveCount == 590) || (NumVertices == 793 && PrimitiveCount == 834) || (NumVertices == 3891 && PrimitiveCount == 4598) || (NumVertices == 592 && PrimitiveCount == 532) || (NumVertices == 2510 && PrimitiveCount == 2470) || (NumVertices == 171 && PrimitiveCount == 114) || (NumVertices == 1398 && PrimitiveCount == 1176) || (NumVertices == 384 && PrimitiveCount == 250) || (NumVertices == 384 && PrimitiveCount == 250) || (NumVertices == 994 && PrimitiveCount == 714) || (NumVertices == 529 && PrimitiveCount == 540) || (NumVertices == 353 && PrimitiveCount == 346) || (NumVertices == 726 && PrimitiveCount == 556) || (NumVertices == 1315 && PrimitiveCount == 1170) || (NumVertices == 2140 && PrimitiveCount == 2310) || (NumVertices == 3326 && PrimitiveCount == 4336) || (NumVertices == 3254 && PrimitiveCount == 4122) || (NumVertices == 1730 && PrimitiveCount == 1938) || (NumVertices == 398 && PrimitiveCount == 410) || (NumVertices == 327 && PrimitiveCount == 500) || (NumVertices == 2388 && PrimitiveCount == 2040) || (NumVertices == 222 && PrimitiveCount == 298) || (NumVertices == 1111 && PrimitiveCount == 986) || (NumVertices == 1186 && PrimitiveCount == 1184) || (NumVertices == 339 && PrimitiveCount == 248) || (NumVertices == 994 && PrimitiveCount == 714) )
#define SAS			((NumVertices == 2334 && PrimitiveCount == 2826) || (NumVertices == 438 && PrimitiveCount == 376) || (NumVertices == 447 && PrimitiveCount == 312) || (NumVertices == 1034 && PrimitiveCount == 904) || (NumVertices == 1842 && PrimitiveCount == 1978) || (NumVertices == 2613 && PrimitiveCount == 3248) || (NumVertices == 1001 && PrimitiveCount == 964) || (NumVertices == 3935 && PrimitiveCount == 5226) || (NumVertices == 960 && PrimitiveCount == 1072) || (NumVertices == 2640 && PrimitiveCount == 3070) || (NumVertices == 212 && PrimitiveCount == 288) || (NumVertices == 214 && PrimitiveCount == 202) || (NumVertices == 1373 && PrimitiveCount == 1256) || (NumVertices == 585 && PrimitiveCount == 440) || (NumVertices == 634 && PrimitiveCount == 372) || (NumVertices == 1572 && PrimitiveCount == 1166) || (NumVertices == 2784 && PrimitiveCount == 2384) || (NumVertices == 3790 && PrimitiveCount == 4078) || (NumVertices == 3585 && PrimitiveCount == 4858) || (NumVertices == 1498 && PrimitiveCount == 1304) || (NumVertices == 2525 && PrimitiveCount == 3022) || (NumVertices == 695 && PrimitiveCount == 478) ||  (NumVertices == 193 && PrimitiveCount == 140) || (NumVertices == 580 && PrimitiveCount == 380) || (NumVertices == 1341 && PrimitiveCount == 1132) || (NumVertices == 802 && PrimitiveCount == 800) || (NumVertices == 2301 && PrimitiveCount == 2364) || (NumVertices == 275 && PrimitiveCount == 322) || (NumVertices == 3597 && PrimitiveCount == 4280) || (NumVertices == 3716 && PrimitiveCount == 5064) || (NumVertices == 2578 && PrimitiveCount == 2994) || (NumVertices == 1412 && PrimitiveCount == 1330) || (NumVertices == 568 && PrimitiveCount == 470) || (NumVertices == 689 && PrimitiveCount == 1172) || (NumVertices == 367 && PrimitiveCount == 298) || (NumVertices == 4050 && PrimitiveCount == 4486) || (NumVertices == 308 && PrimitiveCount == 212) || (NumVertices == 2540 && PrimitiveCount == 2444) || (NumVertices == 628 && PrimitiveCount == 670) || (NumVertices == 1488 && PrimitiveCount == 1114) || (NumVertices == 105 && PrimitiveCount == 74) || (NumVertices == 592 && PrimitiveCount == 374) || (NumVertices == 3562 && PrimitiveCount == 4784) || (NumVertices == 2509 && PrimitiveCount == 2954) || (NumVertices == 1402 && PrimitiveCount == 1164) || (NumVertices == 628 && PrimitiveCount == 450) || (NumVertices == 1615 && PrimitiveCount == 1706) || (NumVertices == 541 && PrimitiveCount == 366) || (NumVertices == 3667 && PrimitiveCount == 4952) || (NumVertices == 2460 && PrimitiveCount == 2882) || (NumVertices == 1479 && PrimitiveCount == 1402) || (NumVertices == 552 && PrimitiveCount == 452) )

#define OpforHands ( NumVertices == 156 && PrimitiveCount == 240 )
#define MarinesHands ( NumVertices == 718 && PrimitiveCount == 1236 )
#define SpetzHands ( NumVertices == 1926 && PrimitiveCount == 3128)
#define SASHands (NumVertices == 2138)

#define GoodPlayers		((Marines) || (SAS) || (MarinesHands) || (SASHands))
#define BadPlayers		((Opfor) || (Spetz) || (OpforHands) || (SpetzHands))
#define IsInGameAddress 0x0074E35C

#endif